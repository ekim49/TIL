# HTTP 개념 정리
HTTP는 서버가 클라이언트의 상태를 보존하지 않는 **무상태 프로토콜**

## 상태 유지(Stateful)
- 항상 같은 서버가 유지되어야 한다.
  - 클라이언트 A의 요청이 서버1에서 기억하고 있기 때문에, 항상 서버1이 응답해야 한다.
  - 따라서 만약 서버1이 장애가 난다면 유지되던 상태 정보가 다 날아가버리므로, 클라이언트 A는 처음부터 다시 서버에 요청해야 한다. 

<br/>

## **무상태(Stateless)** - HTTP의 특징 1
  - 응답 서버를 쉽게 바꿀 수 있다. → 무한한 서버 증설 가능
  - 스케일 아웃 - 수평 확장 유리
    - 무상태 프로토콜이라면 클라이언트 A가 요청할 때 이미 필요한 데이터를 다 담아서 보내기 때문에 아무 서버나 호출해도 된다.
    - 만약 서버1이 장애가 생기더라도 다른 서버에서 응답을 전달하면 되기 때문에 클라이언트는 다시 요청할 필요가 없다. (무상태는 서버에서 상태를 보관하지 않는다)
  - 모든 것을 무상태로 설계할 수 있는 경우가 있고 없는 경우도 있다. → 무상태의 한계
    - 무상태
      - e.g. 로그인이 필요 없는 단순한 서비스 소개 화면
    - 상태 유지
      - e.g. 로그인
      - 로그인이 필요한 서비스라면 유저의 상태를 유지해야 되기 때문에 브라우저 쿠키, 서버 세션, 토큰 등을 이용해 상태를 유지
      - 상태유지는 최소한만 사용

<br/>

## 연결지향(Connection Oriented) vs. 비연결성(Connectionless)

### 연결 지향(Connection Oriented)
- 연결을 유지하는 모델
  - TCP / IP 의 경우 기본적으로 연결을 유지한다.
  - 연결을 유지하는 모델에서는 클라이언트는 요청을 보내지 않더라도 계속 연결을 유지해야 한다. → 연결을 유지하는 서버의 자원이 계속 소모가 된다.

<br/>

### 비연결성(Connectionless) - HTTP의 특징 2
- 연결을 유지하지 않는 모델
  - **비연결성을 가지는 HTTP** 에서는 실제로 요청을 주고 받을 때만 연결을 유지한다. → 최소한의 자원으로 서버 유지 가능
  - 응답을 주고 나면 TCP / IP 연결을 끊는다.
  - HTTP 는 기본이 연결을 유지하지 않는 모델이다. (HTTP 1.0 기준으로, HTTP는 연결을 유지하지 않는 모델)
  - 일반적으로 초 단위 이하의 빠른 속도로 응답한다.
        
        ⇒ 트래픽이 많지 않고, 빠른 응답을 제공할 수 있는 경우, 비연결성의 특징은 효율적
        
        ⇒ 하지만 트래픽이 많고, 큰 규모의 서비스를 운영할 때에는 비연결성은 한계를 보인다
        
    
<br/>

## 비연결성의 한계(단점) / 보완

- TCP / IP 연결을 새로 맺어야 한다 - **3 way handshake** 시간 추가
- 웹 브라우저로 사이트를 요청하면 HTML, CSS, JavaScript, 추가 이미지 등 수 많은 자원이 함께 다운로드<p>→ 해당 자원들을 각각 보낼 때마다 연결 끊고 다시 연결하기를 반복하는 것은 비효율적이다.
    
    ⇒ 해결책: **HTTP 지속 연결 (Persistent Connections)** 
- HTTP/2, HTTP/3 에서 더 많은 최적화가 이루어짐
### HTTP 지속 연결이란?
> HTTP 지속 연결에서는 연결이 이루어지고 난 뒤 각각의 자원들을 요청하고 모든 자원에 대한 응답이 돌아온 후에 연결을 종료